{"singlePage": [], "startSite": "06/21/2024", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark_colorblind", "urlMode": "pinyin", "script": "", "style": "", "indexScript": "", "indexStyle": "", "bottomText": "\u2764\ufe0f \u8f6c\u8f7d\u6587\u7ae0\u8bf7\u6ce8\u660e\u51fa\u5904\uff0c\u8c22\u8c22\uff01\u2764\ufe0f", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "title": "DevOps Blog", "subTitle": "\u597d\u8bb0\u6027\u4e0d\u5982\u70c2\u7b14\u5934", "avatarUrl": "https://github.githubassets.com/favicons/favicon.svg", "GMEEK_VERSION": "last", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "postListJson": {"P2": {"htmlDir": "docs/post/\u3010sftp\u3011sftp-lian-jie-shi-wu-fa-zhao-dao-pi-pei-de-zhu-ji-mi-yao-lei-xing.html", "labels": ["sftp"], "postTitle": "\u3010sftp\u3011sftp\u8fde\u63a5\u65f6\u65e0\u6cd5\u627e\u5230\u5339\u914d\u7684\u4e3b\u673a\u5bc6\u94a5\u7c7b\u578b", "postUrl": "post/%E3%80%90sftp%E3%80%91sftp-lian-jie-shi-wu-fa-zhao-dao-pi-pei-de-zhu-ji-mi-yao-lei-xing.html", "postSourceUrl": "https://github.com/JabinSun/jabinsun.github.io/issues/2", "commentNum": 0, "wordCount": 836, "description": "### \u62a5\u9519 \r\n\r\nUnable to negotiate with 1.1.1.1 port 22: no matching host key type found. Their offer: ssh-rsa,ssh-dss\r\n\r\n### \u73af\u5883\r\n\r\nCentOS\u7248\u672c\uff1aCentOS release 6.5 (Final)\r\nOpenSSH\u7248\u672c\uff1aOpenSSH_5.3p1, OpenSSL 1.0.1e-fips 11 Feb 2013\r\nOpenSSL\u7248\u672c\uff1aOpenSSL 1.0.1e-fips 11 Feb 2013\r\n\r\n### \u89e3\u51b3\r\n\r\n**\u65b9\u6cd5\u4e00\uff1a**\r\n\r\n\u751f\u6210\u548c\u4f7f\u7528 ECDSA \u6216 ED25519 \u4e3b\u673a\u5bc6\u94a5\r\n```shell\r\nssh-keygen -t ecdsa -f /etc/ssh/ssh_host_ecdsa_key -N ''\r\nssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key -N ''\r\n```\r\n\u7f16\u8f91 `/etc/ssh/sshd_config`\u6587\u4ef6\uff0c\u6dfb\u52a0\u751f\u6210\u7684\u5bc6\u94a5\r\n```shell\r\nHostKey /etc/ssh/ssh_host_rsa_key\r\nHostKey /etc/ssh/ssh_host_dsa_key\r\nHostKey /etc/ssh/ssh_host_ecdsa_key\r\nHostKey /etc/ssh/ssh_host_ed25519_key\r\n```\r\n\u91cd\u542fSSH\u670d\u52a1\r\n```shell\r\nservice sshd restart\r\n```\r\n\r\n**\u65b9\u6cd5\u4e8c\uff1a**\r\n\r\n\u5347\u7ea7 OpenSSH \u548c OpenSSL\r\n\r\n**\u65b9\u6cd5\u4e09\uff1a**\r\n\r\n\u5ba2\u6237\u7aef\u914d\u7f6e\u4e34\u65f6\u89e3\u51b3\u65b9\u6848\r\n```shell\r\nsftp -o HostKeyAlgorithms=ssh-rsa,ssh-dss username@hostname\r\n```\r\n\u3002", "top": 0, "createdAt": 1718939885, "style": "", "script": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}, "P3": {"htmlDir": "docs/post/\u3010openssl\u3011openssl-sheng-cheng-sui-ji-mi-ma.html", "labels": ["openssl"], "postTitle": "\u3010openssl\u3011openssl\u751f\u6210\u968f\u673a\u5bc6\u7801", "postUrl": "post/%E3%80%90openssl%E3%80%91openssl-sheng-cheng-sui-ji-mi-ma.html", "postSourceUrl": "https://github.com/JabinSun/jabinsun.github.io/issues/3", "commentNum": 0, "wordCount": 46, "description": "```shell\r\n# \u968f\u673a\u5bc6\u7801\r\nopenssl rand -base64 12\r\n```\u3002", "top": 0, "createdAt": 1718953174, "style": "", "script": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}, "P4": {"htmlDir": "docs/post/\u3010etcd\u3011etcd-bei-fen.html", "labels": ["etcd"], "postTitle": "\u3010etcd\u3011etcd\u5907\u4efd", "postUrl": "post/%E3%80%90etcd%E3%80%91etcd-bei-fen.html", "postSourceUrl": "https://github.com/JabinSun/jabinsun.github.io/issues/4", "commentNum": 0, "wordCount": 880, "description": "```shell\r\n#!/bin/bash\r\n# etcd backup\r\n# 0 */3 * * * /home/monitor/etcd_backup.sh >> /home/monitor/etcd_backup.log 2>&1\r\n   \r\nset -e \r\n   \r\nETCD_CA_CERT='/etc/kubernetes/pki/etcd/ca.crt'  \r\nETCD_CERT='/etc/kubernetes/pki/etcd/server.crt'  \r\nETCD_KEY='/etc/kubernetes/pki/etcd/server.key'  \r\nBACKUP_DIR='/var/lib/docker/etcd_backup'  \r\nDT=$(date +%Y%m%d.%H%M%S)  \r\n   \r\n[[ ! -d ${BACKUP_DIR} ]] && mkdir -p ${BACKUP_DIR}  \r\nfind ${BACKUP_DIR} -name '*.db' -mtime +7 -exec rm -f {} \\;  \r\n   \r\nETCDCTL_API=3 /usr/local/bin/etcdctl --endpoints=https://127.0.0.1:2379 \\  \r\n  --cacert='${ETCD_CA_CERT}' --cert='${ETCD_CERT}' --key='${ETCD_KEY}' \\  \r\n  snapshot save '${BACKUP_DIR}/etcd-snapshot-${DT}.db'  \r\n   \r\necho 'Etcd backup success, backup file: ${BACKUP_DIR}/etcd-snapshot-${DT}.db, \\  \r\n  file size: $(du -sh ${BACKUP_DIR}/etcd-snapshot-${DT}.db |awk '{print $1}')'  \r\necho\r\n```\u3002", "top": 0, "createdAt": 1718953769, "style": "", "script": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}, "P5": {"htmlDir": "docs/post/\u3010jenkins\u3011jenkins-qing-li-duo-yu-job.html", "labels": ["jenkins"], "postTitle": "\u3010jenkins\u3011jenkins\u6e05\u7406\u591a\u4f59job", "postUrl": "post/%E3%80%90jenkins%E3%80%91jenkins-qing-li-duo-yu-job.html", "postSourceUrl": "https://github.com/JabinSun/jabinsun.github.io/issues/5", "commentNum": 0, "wordCount": 181, "description": "```shell\r\ndef jobName = 'item_name'\r\ndef maxNumber = 100\r\nJenkins.instance.getItemByFullName(jobName).builds.findAll {\r\n    it.number <= maxNumber\r\n}.each {\r\n    it.delete()\r\n}\r\n```\u3002", "top": 0, "createdAt": 1718954036, "style": "", "script": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}, "P6": {"htmlDir": "docs/post/\u3010elasticsearch\u3011es-chang-yong-ming-ling.html", "labels": ["elasticsearch"], "postTitle": "\u3010elasticsearch\u3011es\u5e38\u7528\u547d\u4ee4", "postUrl": "post/%E3%80%90elasticsearch%E3%80%91es-chang-yong-ming-ling.html", "postSourceUrl": "https://github.com/JabinSun/jabinsun.github.io/issues/6", "commentNum": 0, "wordCount": 313, "description": "- \u68c0\u67e5es\u96c6\u7fa4\u72b6\u6001\r\n```shell\r\ncurl -XGET http://localhost:9200/_cluster/health\\?pretty\r\n```\r\n\r\n- \u5355\u8282\u70b9es\u526f\u672c\u5206\u7247\u8bbe\u4e3a0\r\n```shell\r\ncurl -XPUT 'http://localhost:9200/_settings' -H 'content-Type:application/json' -d'\r\n{\r\n    'number_of_replicas': 0\r\n}'\r\n```\r\n\r\n- \u67e5\u770bes\u6240\u6709\u7d22\u5f15\r\n```shell\r\ncurl -XGET http://localhost:9200/_cat/indices\r\n```\u3002", "top": 0, "createdAt": 1718954425, "style": "", "script": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}, "P7": {"htmlDir": "docs/post/\u3010Dockerfile\u3011Dockerfile.crontab.html", "labels": ["Dockerfile", "crontab"], "postTitle": "\u3010Dockerfile\u3011Dockerfile.crontab", "postUrl": "post/%E3%80%90Dockerfile%E3%80%91Dockerfile.crontab.html", "postSourceUrl": "https://github.com/JabinSun/jabinsun.github.io/issues/7", "commentNum": 0, "wordCount": 759, "description": "```Dockerfile\r\nFROM alpine:latest\r\nENV SUPERCRONIC_URL=https://github.com/aptible/supercronic/releases/download/v0.1.12/supercronic-linux-amd64 \\\r\n    SUPERCRONIC=supercronic-linux-amd64 \\\r\n    SUPERCRONIC_SHA1SUM=048b95b48b708983effb2e5c935a1ef8483d9e3e\r\nRUN apk update \\\r\n    && apk --no-cache add curl \\\r\n    && curl -fsSLO '$SUPERCRONIC_URL' \\\r\n    && echo '${SUPERCRONIC_SHA1SUM}  ${SUPERCRONIC}' | sha1sum -c - \\\r\n    && chmod +x '$SUPERCRONIC' \\\r\n    && mv '$SUPERCRONIC' '/usr/local/bin/${SUPERCRONIC}' \\\r\n    && ln -s '/usr/local/bin/${SUPERCRONIC}' /usr/local/bin/supercronic\r\nCOPY cronfile /app/cronfile\r\n# RUN cron job\r\nCMD ['/usr/local/bin/supercronic', '-debug', '/app/cronfile']\r\n```\r\n\r\n```shell\r\necho '* * * * * date' >> /app/cronfile.log\r\n```\u3002", "top": 0, "createdAt": 1718955416, "style": "", "script": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}, "P8": {"htmlDir": "docs/post/\u3010Docerfile\u3011Dockerfile.python.html", "labels": ["Dockerfile", "python"], "postTitle": "\u3010Docerfile\u3011Dockerfile.python", "postUrl": "post/%E3%80%90Docerfile%E3%80%91Dockerfile.python.html", "postSourceUrl": "https://github.com/JabinSun/jabinsun.github.io/issues/8", "commentNum": 0, "wordCount": 1489, "description": "```Dockerfile\r\nFROM python:3.10-slim AS builder\r\nENV PYTHONDONTWRITEBYTECODE=1\r\nENV PYTHONUNBUFFERED=1\r\nENV PATH='/app/venv/bin:$PATH'\r\nWORKDIR /app\r\nCOPY ./requirements.txt .\r\nRUN python3 -m venv /app/venv && \\\r\n    /app/venv/bin/pip install \\\r\n    -i https://mirrors.aliyun.com/pypi/simple \\\r\n    --no-warn-script-location \\\r\n    --no-cache-dir \\\r\n    -r requirements.txt\r\n\r\nFROM python:3.10-slim-buster\r\nENV PYTHONDONTWRITEBYTECODE=1\r\nENV PYTHONUNBUFFERED=1\r\nENV PATH='/app/venv/bin:$PATH'\r\nWORKDIR /app\r\nCOPY --from=builder /app/venv /app/venv\r\nCOPY . /app\r\nEXPOSE 5000\r\nCMD ['/app/venv/bin/gunicorn', 'app:app', '--bind', '0.0.0.0:5000']\r\n```\r\n\r\n```Dockerfile\r\n# python:<version>-slim / python:<version>-slim-bullseye / python:<version>-slim-buster\r\n# ${version} >> ${version}-slim > ${version}-slim-bullseye > ${version}-slim-buster\r\nFROM python:3.10-slim\r\nLABEL maintainer='xxx@gmail.com'\r\nEXPOSE 8000\r\n# Keeps Python from generating .pyc files in the container\r\nENV PYTHONDONTWRITEBYTECODE=1\r\n# Turns off buffering for easier container logging\r\nENV PYTHONUNBUFFERED=1\r\n# Install pip requirements\r\nCOPY requirements.txt .\r\nRUN python -m pip install --no-cache-dir --upgrade -r requirements.txt\r\nWORKDIR /app\r\nCOPY . /app\r\n# Creates a non-root user with an explicit UID and adds permission to access the /app folder\r\nRUN adduser -u 5678 --disabled-password --gecos '' appuser && chown -R appuser /app\r\nUSER appuser\r\nCMD ['uvicorn', 'shortener_app.main:app', '--host', '0.0.0.0']\r\n```\u3002", "top": 0, "createdAt": 1718955613, "style": "", "script": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}, "P9": {"htmlDir": "docs/post/\u3010jar\u3011start_jar.sh.html", "labels": ["jar", "shell"], "postTitle": "\u3010jar\u3011start_jar.sh", "postUrl": "post/%E3%80%90jar%E3%80%91start_jar.sh.html", "postSourceUrl": "https://github.com/JabinSun/jabinsun.github.io/issues/9", "commentNum": 0, "wordCount": 1232, "description": "```shell\r\n#!/bin/bash\r\n# start  stop  restart\r\n#\u8fd9\u91cc\u53ef\u66ff\u6362\u4e3a\u81ea\u5df1\u7684\u6267\u884c\u7a0b\u5e8f\uff0c\u5176\u4ed6\u65e0\u9700\u66f4\u6539\r\nAPP_NAME='xxx.jar'\r\nCONFIG_NAME='application.properties'\r\n\r\n#\u4f7f\u7528\u8bf4\u660e\uff0c\u7528\u6765\u63d0\u793a\u8f93\u5165\u53c2\u6570\r\nusage() {\r\n    echo 'Usage: sh $0 [start|stop|restart|status]'\r\n    exit 1\r\n}\r\n\r\n#\u68c0\u67e5\u7a0b\u5e8f\u662f\u5426\u5728\u8fd0\u884c\r\nis_exist(){\r\n  pid=`ps -ef|grep $CONFIG_NAME |grep -v grep|awk '{print $2}' `\r\n  #\u5982\u679c\u4e0d\u5b58\u5728\u8fd4\u56de1\uff0c\u5b58\u5728\u8fd4\u56de0\r\n  if [ -z '${pid}' ]; then\r\n   return 1\r\n  else\r\n    return 0\r\n  fi\r\n}\r\n\r\n#\u542f\u52a8\u65b9\u6cd5\r\nstart(){\r\n  is_exist\r\n  if [ $? -eq '0' ]; then\r\n    echo '${APP_NAME} is already running. pid=${pid} .'\r\n  else\r\n    nohup java -server -jar -Xmx1024m $APP_NAME --spring.config.location=$CONFIG_NAME > /dev/null 2>&1 &\r\n    echo '${APP_NAME} start success'\r\n  fi\r\n}\r\n\r\n#\u505c\u6b62\u65b9\u6cd5\r\nstop(){\r\n  is_exist\r\n  if [ $? -eq '0' ]; then\r\n    kill -9 $pid\r\n  else\r\n    echo '${APP_NAME} is not running'\r\n  fi\r\n}\r\n\r\n#\u8f93\u51fa\u8fd0\u884c\u72b6\u6001\r\nstatus(){\r\n  is_exist\r\n  if [ $? -eq '0' ]; then\r\n    echo '${APP_NAME} is running. PID is ${pid}'\r\n  else\r\n    echo '${APP_NAME} is not running.'\r\n  fi\r\n}\r\n\r\n#\u91cd\u542f\r\nrestart(){\r\n  stop\r\n  start\r\n}\r\n\r\n#\u6839\u636e\u8f93\u5165\u53c2\u6570\uff0c\u9009\u62e9\u6267\u884c\u5bf9\u5e94\u65b9\u6cd5\uff0c\u4e0d\u8f93\u5165\u5219\u6267\u884c\u4f7f\u7528\u8bf4\u660e\r\ncase '$1' in\r\n  'start')\r\n    start\r\n    ;;\r\n  'stop')\r\n    stop\r\n    ;;\r\n  'status')\r\n    status\r\n    ;;\r\n  'restart')\r\n    restart\r\n    ;;\r\n  *)\r\n    usage\r\n    ;;\r\nesac\r\n\r\n```\u3002", "top": 0, "createdAt": 1718957635, "style": "", "script": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"Blog": "#BFD4F2", "bug": "#d73a4a", "crontab": "#DFCD66", "Dockerfile": "#A425E0", "documentation": "#0075ca", "duplicate": "#cfd3d7", "elasticsearch": "#984A57", "enhancement": "#a2eeef", "etcd": "#226E3F", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "jenkins": "#402B1A", "openssl": "#D6612A", "python": "#EB4401", "question": "#d876e3", "sftp": "#8A3084", "wontfix": "#ffffff"}, "displayTitle": "DevOps Blog", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "homeUrl": "https://jabinsun.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}